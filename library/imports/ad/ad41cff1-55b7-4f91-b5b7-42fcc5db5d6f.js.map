{"version":3,"sources":["../../../../../assets/src/layer/assets/src/layer/background.js"],"names":["cc","Class","extends","Component","properties","near_bg","Node","far_bg","near_speed","far_speed","onLoad","fixBgPos","bg1","bg2","x","bg1BoundingBox","getBoundingBox","setPosition","xMax","yMin","update","dt","bgMove","checkBgReset","bgList","speed","index","length","element","winSize","director","getWinSize","first_xMax","preFirstBg","shift","push","curFirstBg"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS,CAACL,GAAGM,IAAJ,CADD;AAERC,gBAAQ,CAACP,GAAGM,IAAJ,CAFA;;AAIRE,oBAAY,CAJJ;AAKRC,mBAAW;AALH,KAHP;;AAWL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,QAAL,CAAc,KAAKJ,MAAL,CAAY,CAAZ,CAAd,EAA8B,KAAKA,MAAL,CAAY,CAAZ,CAA9B;AACA,aAAKI,QAAL,CAAc,KAAKN,OAAL,CAAa,CAAb,CAAd,EAA+B,KAAKA,OAAL,CAAa,CAAb,CAA/B;AACH,KAfI;;AAiBLM,cAAU,kBAAUC,GAAV,EAAeC,GAAf,EACV;AACID,YAAIE,CAAJ,GAAQ,CAAR;AACA,YAAIC,iBAAiBH,IAAII,cAAJ,EAArB;AACAH,YAAII,WAAJ,CAAgBF,eAAeG,IAA/B,EAAqCH,eAAeI,IAApD;AACH,KAtBI;;AAwBL;AACAC,YAAQ,gBAAUC,EAAV,EACR;AACI,aAAKC,MAAL,CAAY,KAAKf,MAAjB,EAAyB,KAAKE,SAA9B;AACA,aAAKa,MAAL,CAAY,KAAKjB,OAAjB,EAA0B,KAAKG,UAA/B;;AAEA,aAAKe,YAAL,CAAkB,KAAKhB,MAAvB;AACA,aAAKgB,YAAL,CAAkB,KAAKlB,OAAvB;AACH,KAhCI;;AAkCLiB,YAAO,gBAASE,MAAT,EAAiBC,KAAjB,EACP;AACI,aAAK,IAAIC,QAAQ,CAAjB,EAAoBA,QAAQF,OAAOG,MAAnC,EAA2CD,OAA3C,EACA;AACI,gBAAIE,UAAUJ,OAAOE,KAAP,CAAd;AACAE,oBAAQd,CAAR,IAAaW,KAAb;AACH;AACJ,KAzCI;;AA2CL;;;AAGAF,kBAAa,sBAASC,MAAT,EACb;AACI,YAAIK,UAAU7B,GAAG8B,QAAH,CAAYC,UAAZ,EAAd;AACA,YAAIC,aAAaR,OAAO,CAAP,EAAUR,cAAV,GAA2BE,IAA5C;AACA,YAAIc,cAAc,CAAlB,EACA;AACI,gBAAIC,aAAaT,OAAOU,KAAP,EAAjB;AACAV,mBAAOW,IAAP,CAAYF,UAAZ;;AAEA,gBAAIG,aAAaZ,OAAO,CAAP,CAAjB;AACAS,uBAAWnB,CAAX,GAAesB,WAAWpB,cAAX,GAA4BE,IAA3C;AACH;AACJ;AA1DI,CAAT","file":"background.js","sourceRoot":"../../../../../assets/src/layer","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        near_bg: [cc.Node],\n        far_bg: [cc.Node],\n\n        near_speed: 5,\n        far_speed: 0.5,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.fixBgPos(this.far_bg[0], this.far_bg[1]);\n        this.fixBgPos(this.near_bg[0], this.near_bg[1]);\n    },\n\n    fixBgPos: function (bg1, bg2)\n    {\n        bg1.x = 0;\n        var bg1BoundingBox = bg1.getBoundingBox();\n        bg2.setPosition(bg1BoundingBox.xMax, bg1BoundingBox.yMin);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) \n    {\n        this.bgMove(this.far_bg, this.far_speed);\n        this.bgMove(this.near_bg, this.near_speed);\n\n        this.checkBgReset(this.far_bg);\n        this.checkBgReset(this.near_bg);\n    },\n\n    bgMove:function(bgList, speed)\n    {\n        for (var index = 0; index < bgList.length; index++) \n        {\n            var element = bgList[index];\n            element.x -= speed;\n        }\n    },\n\n    /***\n     * 检查背景是否要重置位置\n     */\n    checkBgReset:function(bgList)\n    {\n        var winSize = cc.director.getWinSize();\n        var first_xMax = bgList[0].getBoundingBox().xMax;\n        if (first_xMax <= 0) \n        {\n            var preFirstBg = bgList.shift();\n            bgList.push(preFirstBg);\n\n            var curFirstBg = bgList[0];\n            preFirstBg.x = curFirstBg.getBoundingBox().xMax;\n        }\n    }\n});\n"]}